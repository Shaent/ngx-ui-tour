(self.webpackChunkngx_ui_tour=self.webpackChunkngx_ui_tour||[]).push([[92],{25:function(t,e,s){"use strict";s.d(e,{Ev:function(){return B},Yj:function(){return O},Z5:function(){return E},oW:function(){return N},QL:function(){return y},Vs:function(){return x}});var i=s(1116),r=s(5663),n=s(8318),o=s(8569),h=s(2293);function a(t){const{subscriber:e,counter:s,period:i}=t;e.next(s),this.schedule({subscriber:e,counter:s+1,period:i},i)}var c=s(5959),u=s(1906),p=s(9764),d=s(7254),l=s(6882);class S{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new w(t,this.durationSelector))}}class w extends l.Ds{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){try{const e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(e){this.destination.error(e)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(t,e){let s=this.durationSubscription;this.value=t,this.hasValue=!0,s&&(s.unsubscribe(),this.remove(s)),s=(0,l.ft)(e,new l.IY(this)),s&&!s.closed&&this.add(this.durationSubscription=s)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,super._next(t)}}}var b=s(9996),f=s(3835),m=s(3530),v=s(5366);const g=["*"];var x=function(t){return t[t.OFF=0]="OFF",t[t.ON=1]="ON",t[t.PAUSED=2]="PAUSED",t}({});let y=(()=>{class t{constructor(t){this.router=t,this.stepShow$=new c.xQ,this.stepHide$=new c.xQ,this.initialize$=new c.xQ,this.start$=new c.xQ,this.end$=new c.xQ,this.pause$=new c.xQ,this.resume$=new c.xQ,this.startWaiting$=new c.xQ,this.stopWaiting$=new c.xQ,this.anchorRegister$=new c.xQ,this.anchorUnregister$=new c.xQ,this.events$=(0,u.T)(this.stepShow$.pipe((0,b.U)(t=>({name:"stepShow",value:t}))),this.stepHide$.pipe((0,b.U)(t=>({name:"stepHide",value:t}))),this.initialize$.pipe((0,b.U)(t=>({name:"initialize",value:t}))),this.start$.pipe((0,b.U)(t=>({name:"start",value:t}))),this.end$.pipe((0,b.U)(t=>({name:"end",value:t}))),this.pause$.pipe((0,b.U)(t=>({name:"pause",value:t}))),this.resume$.pipe((0,b.U)(t=>({name:"resume",value:t}))),this.anchorRegister$.pipe((0,b.U)(t=>({name:"anchorRegister",value:t}))),this.anchorUnregister$.pipe((0,b.U)(t=>({name:"anchorUnregister",value:t})))),this.steps=[],this.anchors={},this.status=x.OFF,this.isHotKeysEnabled=!0}initialize(t,e){t&&t.length>0&&(this.status=x.OFF,this.steps=t.map(t=>Object.assign({},e,t)),this.initialize$.next(this.steps))}disableHotkeys(){this.isHotKeysEnabled=!1}enableHotkeys(){this.isHotKeysEnabled=!0}start(){this.startAt(0)}startAt(t){this.status=x.ON,this.goToStep(this.loadStep(t)),this.start$.next(),this.router.events.pipe((0,f.h)(t=>t instanceof r.OD),(0,m.P)()).subscribe(()=>{this.currentStep&&this.currentStep.hasOwnProperty("route")&&this.hideStep(this.currentStep)})}end(){this.status=x.OFF,this.hideStep(this.currentStep),this.currentStep=void 0,this.end$.next()}pause(){this.status=x.PAUSED,this.hideStep(this.currentStep),this.pause$.next()}resume(){this.status=x.ON,this.showStep(this.currentStep),this.resume$.next()}toggle(t){t?this.currentStep?this.pause():this.resume():this.currentStep?this.end():this.start()}next(){this.hasNext(this.currentStep)&&this.goToStep(this.loadStep(this.currentStep.nextStep||this.steps.indexOf(this.currentStep)+1))}hasNext(t){return t?void 0!==t.nextStep||this.steps.indexOf(t)<this.steps.length-1:(console.warn("Can't get next step. No currentStep."),!1)}prev(){this.hasPrev(this.currentStep)&&this.goToStep(this.loadStep(this.currentStep.prevStep||this.steps.indexOf(this.currentStep)-1))}hasPrev(t){return t?void 0!==t.prevStep||this.steps.indexOf(t)>0:(console.warn("Can't get previous step. No currentStep."),!1)}goto(t){this.goToStep(this.loadStep(t))}register(t,e){if(t){if(this.anchors[t])throw new Error("anchorId "+t+" already registered!");this.anchors[t]=e,this.anchorRegister$.next(t)}}unregister(t){t&&(delete this.anchors[t],this.anchorUnregister$.next(t))}getStatus(){return this.status}isHotkeysEnabled(){return this.isHotKeysEnabled}goToStep(t){if(!t)return console.warn("Can't go to non-existent step"),void this.end();this.currentStep&&this.hideStep(this.currentStep);let e=new Promise(t=>t(!0));"string"==typeof t.route?e=this.router.navigateByUrl(t.route):Array.isArray(t.route)&&(e=this.router.navigate(t.route)),e.then(e=>{!1===e||t.waitFor?!1!==e&&this.wait(t):setTimeout(()=>this.setCurrentStep(t))})}wait(t){const e=(0,p.D)(t.waitFor);this.startWaiting$.next(t),e.pipe((0,m.P)()).subscribe(()=>{setTimeout(()=>this.setCurrentStep(t)),this.stopWaiting$.next(t)})}loadStep(t){return"number"==typeof t?this.steps[t]:this.steps.find(e=>e.stepId===t)}setCurrentStep(t){this.currentStep=t,this.showStep(this.currentStep),this.router.events.pipe((0,f.h)(t=>t instanceof r.OD),(0,m.P)()).subscribe(()=>{this.currentStep&&this.currentStep.hasOwnProperty("route")&&this.hideStep(this.currentStep)})}showStep(t){const e=this.anchors[t&&t.anchorId];if(!e)return t.isAsync?(this.startWaiting$.next(t),void this.anchorRegister$.pipe((0,f.h)(e=>e===t.anchorId),(0,m.P)()).subscribe(()=>{setTimeout(()=>this.showStep(t)),this.stopWaiting$.next(t)})):(console.warn("Can't attach to unregistered anchor with id "+t.anchorId),void this.end());e.showTourStep(t),this.stepShow$.next(t)}hideStep(t){const e=this.anchors[t&&t.anchorId];e&&(e.hideTourStep(),this.stepHide$.next(t))}}return t.\u0275fac=function(e){return new(e||t)(v.LFG(r.F0))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t){this.tourService=t}onEscapeKey(){this.tourService.getStatus()===x.ON&&this.tourService.isHotkeysEnabled()&&this.tourService.end()}onArrowRightKey(){this.tourService.getStatus()===x.ON&&this.tourService.hasNext(this.tourService.currentStep)&&this.tourService.isHotkeysEnabled()&&this.tourService.next()}onArrowLeftKey(){this.tourService.getStatus()===x.ON&&this.tourService.hasPrev(this.tourService.currentStep)&&this.tourService.isHotkeysEnabled()&&this.tourService.prev()}}return t.\u0275fac=function(e){return new(e||t)(v.Y36(y))},t.\u0275cmp=v.Xpm({type:t,selectors:[["tour-hotkey-listener"]],hostBindings:function(t,e){1&t&&v.NdJ("keydown.Escape",function(){return e.onEscapeKey()},!1,v.Jf7)("keydown.ArrowRight",function(){return e.onArrowRightKey()},!1,v.Jf7)("keydown.ArrowLeft",function(){return e.onArrowLeftKey()},!1,v.Jf7)},ngContentSelectors:g,decls:1,vars:0,template:function(t,e){1&t&&(v.F$t(),v.Hsn(0))},encapsulation:2}),t})();var k=function(t){return t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.All=2]="All",t}({});function $(t,e=k.All){const s=window.innerWidth,i=window.innerHeight,r=t.getBoundingClientRect(),n=r.left>=0&&r.right<=s,o=r.top>=0,h=r.bottom<=i;return e===k.Top?o&&n:e===k.Bottom?h&&n:o&&h&&n}class B{static ensureVisible(t){$(t,k.Bottom)?$(t,k.Top)||t.scrollIntoView(!0):t.scrollIntoView(!1)}}let O=(()=>{class t{constructor(t){this.renderer=t.createRenderer(null,null)}show(t){const e=t.nativeElement.getBoundingClientRect();this.backdropElement||(this.createBackdrop(),this.subscribeToWindowResizeEvent()),this.targetHtmlElement=t.nativeElement,this.setBackdropElStyles(e)}createBackdrop(){this.createBackdropBaseElement(),this.createBackdropElement()}createBackdropBaseElement(){this.backdropBaseElement=this.renderer.createElement("div"),this.applyStyles({position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"100"},this.backdropBaseElement),this.renderer.appendChild(document.body,this.backdropBaseElement)}createBackdropElement(){this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-ui-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement)}subscribeToWindowResizeEvent(){const t=(0,d.R)(window,"resize");var e;this.windowResizeSubscription$=t.pipe((e=()=>function(t=0,e=o.P){return(!(0,h.k)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=o.P),new n.y(s=>(s.add(e.schedule(a,t,{subscriber:s,counter:0,period:t})),s))}(10),t=>t.lift(new S(e)))).subscribe(()=>{const t=this.targetHtmlElement.getBoundingClientRect();this.setBackdropElStyles(t),B.ensureVisible(this.targetHtmlElement)})}close(){this.backdropElement&&(this.removeBackdropElement(),this.windowResizeSubscription$.unsubscribe())}removeBackdropElement(){this.renderer.removeChild(document.body,this.backdropBaseElement),this.renderer.removeChild(document.body,this.backdropElement),this.backdropBaseElement=null,this.backdropElement=null}setBackdropElStyles(t){var e,s;const i=null!==(e=window.scrollX)&&void 0!==e?e:window.pageXOffset,r=null!==(s=window.scrollY)&&void 0!==s?s:window.pageYOffset;this.applyStyles({position:"absolute",width:`${t.width}px`,height:`${t.height}px`,top:`${t.top+r}px`,left:`${t.left+i}px`,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.7)",zIndex:"101"},this.backdropElement)}applyStyles(t,e){for(const s of Object.keys(t))this.renderer.setStyle(e,s,t[s])}}return t.\u0275fac=function(e){return new(e||t)(v.LFG(v.FYo))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac}),t})(),N=(()=>{class t{static forRoot(){return{ngModule:t,providers:[y,O]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v.oAB({type:t}),t.\u0275inj=v.cJS({imports:[[i.ez,r.Bz]]}),t})()},2628:function(t,e,s){"use strict";s.d(e,{g:function(){return o}});var i=s(8569),r=s(6673),n=s(3103);function o(t,e=i.P){var s;const r=(s=t)instanceof Date&&!isNaN(+s)?+t-e.now():Math.abs(t);return t=>t.lift(new h(r,e))}class h{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.delay,this.scheduler))}}class a extends r.L{constructor(t,e,s){super(t),this.delay=e,this.scheduler=s,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,s=e.queue,i=t.scheduler,r=t.destination;for(;s.length>0&&s[0].time-i.now()<=0;)s.shift().notification.observe(r);if(s.length>0){const e=Math.max(0,s[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(a.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,s=new c(e.now()+this.delay,t);this.queue.push(s),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(n.P.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(n.P.createComplete()),this.unsubscribe()}}class c{constructor(t,e){this.time=t,this.notification=e}}}}]);